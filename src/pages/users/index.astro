---
import Layout from "../../layouts/Layout.astro";
import axios from "axios"
import moment from "moment"

const usersData = await axios.get('http://localhost:8888/users')
const users = usersData.data.results

---

<Layout title="Users">
    <h1 class="text-5xl font-bold">List Users</h1>
    
    <!-- table - start -->
    <div class="overflow-x-auto">
        <table class="table">
            <!-- head -->
            <thead class="bg-[#1D222A]">
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Created Date</th>
                    <th>Options</th>
                </tr>
            </thead>
            <tbody>
                {users.map((user: { id: unknown; name: unknown; email: unknown; created_at: unknown; }) => (
                    <tr>
                        <th>{user.id}</th>
                        <td>{user.name}</td>
                        <td>{user.email}</td>
                        <td>{moment(user.created_at).format('LLLL')}</td>
                        <td class="flex gap-3">
                            <a class="btn btn-active btn-neutral" href={`/users/${user.id}`}>Edit</a>
                            <button class="btn btn-active btn-error">Delete</button>
                        </td>
                    </tr>
                ))}
            </tbody>
        </table>
    </div>
    <!-- table - end -->
</Layout>
